import{_ as K}from"./index-ed788ec2.js";import{_ as H}from"./index.vue_vue_type_script_name_BdSandMsg_setup_true_lang-42f59eec.js";import{e as Q,a6 as W,r as S,l as o,aC as X,aG as B,av as x,ak as u,aw as Y,M as f,ax as Z,E as h,o as ee,h as p,ay as te,i as g,j as y,w as l,a7 as i,a8 as C,u as r,af as ae,a3 as oe,ad as re,a5 as ne,az as V,J as le,aK as se,aa as ie,ab as de,a4 as ue,at as E,ah as pe}from"./vue-cc42d2bc.js";import{B as ce,_ as _e}from"./index-3da832da.js";import{g as me,a as fe}from"./group-1872a9ab.js";import{b as U}from"./route-block-83d24a4e.js";import"./message-a13469e4.js";import"./axios-4fe91515.js";const ge=s=>(ie("data-v-5d59b8b0"),s=s(),de(),s),be={class:"flex-1 el-card border-none flex-col box-border overflow-hidden"},ve={class:"h-50px pl-12px pr-12px box-border flex items-center justify-between bd-title"},ye={class:"bd-title-left"},we={class:"m-0 font-600"},xe={class:"flex items-center h-50px"},he={class:"flex-1 overflow-hidden p-12px"},Ce={class:"bd-card-footer pl-12px pr-12px mb-12px flex items-center justify-between"},ke=ge(()=>i("div",null,null,-1));function ze(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!se(s)}const j=Q({__name:"groupmembers",setup(s){const b=W(),G=S([{prop:"name",label:"用户昵称",fixed:"left",width:200},{prop:"avatar",label:"用户头像",align:"center",width:100,render:e=>{let t="";return e.row.uid&&(t=`${ce.APP_URL}users/${e.row.uid}/avatar`),o(X,{src:t,size:54},{default:()=>[e.row.name]})}},{prop:"uid",label:"用户ID",fixed:"left",width:320},{prop:"status",label:"成员角色",width:120,render:e=>{let t="成员",c="primary";return(e==null?void 0:e.row.role)==1&&(t="群主",c="success"),(e==null?void 0:e.row.role)==2&&(t="管理员",c="warning"),o(B,{type:c},ze(t)?t:{default:()=>[t]})}},{prop:"remark",label:"群内备注"},{prop:"created_at",label:"入群时间",width:180},{prop:"operation",label:"操作",align:"left",fixed:"right",width:180,render:e=>o(Y,null,{default:()=>[o(x,{type:"primary",onClick:()=>q(e.row)},{default:()=>[u("发消息")]}),(e==null?void 0:e.row.role)!=1&&o(x,{type:"danger",onClick:()=>F(e.row)},{default:()=>[u("移除")]})]})}]),k=f([]),w=f(!1),z=f(0),n=S({keyword:"",page_size:15,page_index:1}),_=()=>{w.value=!0,me(n,b.query.groupNo).then(e=>{w.value=!1,k.value=e.list,z.value=e.count})},I=e=>{n.page_size=e,_()},T=e=>{n.page_index=e,_()},v=f(!1),D=f({receivederChannelType:1,receiveder:"",receivederName:"",sender:"",senderName:""}),q=e=>{v.value=!0,D.value={receivederChannelType:2,receiveder:b.query.groupNo,receivederName:b.query.name,sender:e.uid,senderName:e.name}},$=e=>{const t=[];t.push(e.uid),fe({uid:t},b.query.groupNo).then(d=>{d.status==200&&(_(),h({type:"success",message:"移除成功！"}))}).catch(d=>{d.status==400&&h.error(d.msg)})},F=e=>{Z.confirm("确定，是否删除此移除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(()=>{$(e)}).catch(()=>{h({type:"info",message:"取消成功！"})})};return ee(()=>{_()}),(e,t)=>{const c=p("el-input"),d=p("el-form-item"),M=p("el-form"),O=p("i-bd-setting"),N=p("el-table-column"),P=p("el-table"),L=p("el-pagination"),R=H,A=K,J=te("loading");return g(),y(A,{class:"flex-col"},{default:l(()=>[i("div",be,[i("div",ve,[i("div",ye,[i("p",we,[o(r(B),{type:"primary"},{default:l(()=>[u(C(e.$route.query.name),1)]),_:1}),u(" 群成员 ")])]),i("div",xe,[o(M,{inline:""},{default:l(()=>[o(d,{class:"mb-0 !mr-16px"},{default:l(()=>[o(c,{modelValue:r(n).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>r(n).keyword=a),placeholder:"成员昵称",clearable:""},null,8,["modelValue"])]),_:1}),o(d,{class:"mb-0 !mr-0"},{default:l(()=>[o(r(x),{type:"primary",onClick:_},{default:l(()=>[u("查询")]),_:1})]),_:1})]),_:1})])]),i("div",he,[ae((g(),y(P,{data:r(k),border:!0,style:{width:"100%",height:"100%"}},{default:l(()=>[o(N,{type:"index",width:42,align:"center",fixed:"left"},{header:l(()=>[o(O,{class:"cursor-pointer",size:"16"})]),_:1}),(g(!0),oe(ne,null,re(r(G),a=>(g(),y(N,V(a,{key:a.prop}),{default:l(m=>[a.render?(g(),y(ue(a.render),{key:0,row:m.row},null,8,["row"])):a.formatter?E(e.$slots,a.prop,{key:1,row:m.row},()=>[u(C(a.formatter(m.row)),1)],!0):a.prop?E(e.$slots,a.prop,{key:2,row:m.row},()=>[u(C(m.row[a.prop]),1)],!0):pe("",!0)]),_:2},1040))),128))]),_:3},8,["data"])),[[J,r(w)]])]),i("div",Ce,[ke,o(L,{"current-page":r(n).page_index,"onUpdate:currentPage":t[1]||(t[1]=a=>r(n).page_index=a),"page-size":r(n).page_size,"onUpdate:pageSize":t[2]||(t[2]=a=>r(n).page_size=a),"page-sizes":[15,20,30,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:r(z),onSizeChange:I,onCurrentChange:T},null,8,["current-page","page-size","total"])])]),o(R,V({value:r(v),"onUpdate:value":t[3]||(t[3]=a=>le(v)?v.value=a:null)},r(D)),null,16,["value"])]),_:3})}}});typeof U=="function"&&U(j);const Ge=_e(j,[["__scopeId","data-v-5d59b8b0"]]);export{Ge as default};
