import{_ as J}from"./index-ed788ec2.js";import{g as R,h as H,i as K}from"./message-a13469e4.js";import{e as E,M as b,U as Q,h as r,i as h,j as y,w as n,l as o,ak as f,a7 as c,E as k,r as T,aG as X,av as P,aw as Y,ax as Z,o as ee,ay as te,u as s,af as oe,a3 as ae,ad as ne,a5 as le,J as se,aa as re,ab as de,az as ie,a4 as ce,at as U,a8 as M}from"./vue-cc42d2bc.js";import{b as $}from"./route-block-83d24a4e.js";import{_ as pe}from"./index-3da832da.js";import"./axios-4fe91515.js";const ue=E({name:"BdProhitWords"}),_e=E({...ue,props:{value:{type:Boolean,default:!1}},emits:["update:value","ok"],setup(m,{emit:C}){const g=m,i=b(""),u=b(!1);Q(()=>g.value,(_,d)=>{console.log(g.value),g.value=_});const l=()=>{C("update:value",!1)},p=()=>{if(!i.value)return k.info("请输入违禁词！");const _={content:i.value};u.value=!0,R(_).then(d=>{u.value=!1,d.status==200&&(k.success("发送成功！"),i.value="",l(),C("ok",!0))}).catch(d=>{u.value=!1,d.status==400&&k.error(d.msg)})};return(_,d)=>{const v=r("el-input"),z=r("el-button"),B=r("el-space"),D=r("el-dialog");return h(),y(D,{"model-value":_.value,width:600,"align-center":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,draggable:!0,"z-index":99,title:"添加违禁词",onClose:l},{footer:n(()=>[o(B,null,{default:n(()=>[o(z,{onClick:l},{default:n(()=>[f("取消")]),_:1}),o(z,{type:"primary",loading:u.value,onClick:p},{default:n(()=>[f("发送")]),_:1},8,["loading"])]),_:1})]),default:n(()=>[c("div",null,[o(v,{modelValue:i.value,"onUpdate:modelValue":d[0]||(d[0]=V=>i.value=V),rows:6,type:"textarea",placeholder:"请输入违禁词"},null,8,["modelValue"])])]),_:1},8,["model-value"])}}}),j=m=>(re("data-v-ad0a80f9"),m=m(),de(),m),fe={class:"flex-1 el-card border-none flex-col box-border overflow-hidden"},me={class:"h-50px pl-12px pr-12px box-border flex items-center justify-between bd-title"},ge=j(()=>c("div",{class:"bd-title-left"},[c("p",{class:"m-0 font-600"},"违禁词列表")],-1)),ve={class:"flex items-center h-50px"},he={class:"flex-1 overflow-hidden p-12px"},be={class:"bd-card-footer pl-12px pr-12px mb-12px flex items-center justify-between"},we=j(()=>c("div",null,null,-1)),I=E({__name:"prohibitwords",setup(m){const C=T([{prop:"content",label:"违禁词"},{prop:"is_deleted",label:"是否删除",width:160,render:e=>{const a=e.row.is_deleted===1?"danger":"";return o(X,{type:a},{default:()=>[f(" "),e.row.is_deleted===1?"是":"否"]})}},{prop:"created_at",label:"注册时间",width:220},{prop:"operation",label:"操作",align:"center",fixed:"right",width:120,render:e=>{const a=e.row.is_deleted===0?"danger":"warning";return o(Y,null,{default:()=>[o(P,{type:a,onClick:()=>V(e.row)},{default:()=>[e.row.is_deleted==0?"删除":"恢复"]})]})}}]),g=b([]),i=b(!1),u=b(0),l=T({search_key:"",page_size:15,page_index:1}),p=()=>{i.value=!0,H(l).then(e=>{i.value=!1,g.value=e.list,u.value=e.count})},_=e=>{l.page_size=e,p()},d=e=>{l.page_index=e,p()},v=b(!1),z=()=>{v.value=!0},B=()=>{p()},D=e=>{console.log(e);const a={is_deleted:e.is_deleted==1?0:1,id:e.id},w=e.is_deleted===0?"删除违禁词成功!":"恢复违禁词成功!";K(a).then(S=>{S.status==200&&(p(),k({type:"success",message:w}))})},V=e=>{const a=e.is_deleted===0?"删除违禁词":"恢复违禁词",w=e.is_deleted===0?`确定要删除违禁词[${e.content}]吗`:`确定要恢复违禁词[${e.content}]吗`;Z.confirm(w,a,{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(()=>{D(e)}).catch(()=>{k({type:"info",message:"取消成功！"})})};return ee(()=>{p()}),(e,a)=>{const w=r("el-input"),S=r("el-form-item"),N=r("el-form"),F=r("i-bd-setting"),W=r("el-table-column"),G=r("el-table"),L=r("el-pagination"),O=_e,q=J,A=te("loading");return h(),y(q,{class:"flex-col"},{default:n(()=>[c("div",fe,[c("div",me,[ge,c("div",ve,[o(N,{inline:""},{default:n(()=>[o(S,{class:"mb-0 !mr-16px"},{default:n(()=>[o(w,{modelValue:s(l).search_key,"onUpdate:modelValue":a[0]||(a[0]=t=>s(l).search_key=t),placeholder:"请输入违禁词",clearable:""},null,8,["modelValue"])]),_:1}),o(S,{class:"mb-0 !mr-0"},{default:n(()=>[o(s(P),{type:"primary",onClick:p},{default:n(()=>[f("查询")]),_:1}),o(s(P),{type:"primary",onClick:z},{default:n(()=>[f("新增违禁词")]),_:1})]),_:1})]),_:1})])]),c("div",he,[oe((h(),y(G,{data:s(g),border:!0,style:{width:"100%",height:"100%"}},{default:n(()=>[o(W,{type:"index",width:42,align:"center",fixed:"left"},{header:n(()=>[o(F,{class:"cursor-pointer",size:"16"})]),_:1}),(h(!0),ae(le,null,ne(s(C),t=>(h(),y(W,ie(t,{key:t.prop}),{default:n(x=>[t.render?(h(),y(ce(t.render),{key:0,row:x.row},null,8,["row"])):t.formatter?U(e.$slots,t.prop,{key:1,row:x.row},()=>[f(M(t.formatter(x.row)),1)],!0):U(e.$slots,t.prop,{key:2,row:x.row},()=>[f(M(x.row[t.prop]),1)],!0)]),_:2},1040))),128))]),_:3},8,["data"])),[[A,s(i)]])]),c("div",be,[we,o(L,{"current-page":s(l).page_index,"onUpdate:currentPage":a[1]||(a[1]=t=>s(l).page_index=t),"page-size":s(l).page_size,"onUpdate:pageSize":a[2]||(a[2]=t=>s(l).page_size=t),"page-sizes":[15,20,30,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:s(u),onSizeChange:_,onCurrentChange:d},null,8,["current-page","page-size","total"])])]),o(O,{value:s(v),"onUpdate:value":a[3]||(a[3]=t=>se(v)?v.value=t:null),onOk:B},null,8,["value"])]),_:3})}}});typeof $=="function"&&$(I);const Be=pe(I,[["__scopeId","data-v-ad0a80f9"]]);export{Be as default};
