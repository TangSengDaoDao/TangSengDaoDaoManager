import{_ as X}from"./index-ed788ec2.js";import{i as u,a3 as p,a8 as w,e as V,a7 as n,l as _,u as g,j as Y,a4 as I,ah as z,M as b,r as M,o as T,aH as D,B,z as U,h as C,J as N,a5 as $,ad as q,aa as G,ab as J,w as O,aI as Z,aJ as tt}from"./vue-cc42d2bc.js";import{_ as S}from"./index-3da832da.js";import{i as H}from"./echarts-2a5e4828.js";import{a as P}from"./axios-4fe91515.js";import{b as R}from"./route-block-83d24a4e.js";let L=0;const j="webkit moz ms o".split(" ");let f,m;const et=typeof window>"u";if(et)f=function(){},m=function(){};else{f=window.requestAnimationFrame,m=window.cancelAnimationFrame;let e;for(let t=0;t<j.length&&!(f&&m);t++)e=j[t],f=f||window[e+"RequestAnimationFrame"],m=m||window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"];(!f||!m)&&(f=function(t){const s=new Date().getTime(),i=Math.max(0,16-(s-L)),o=window.setTimeout(()=>{t(s+i)},i);return L=s+i,o},m=function(t){window.clearTimeout(t)})}const st={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(e){return e>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(e,t,s,i){return s*(-Math.pow(2,-10*e/i)+1)*1024/1023+t}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=f(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){m(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,f(this.count)},reset(){this.startTime=null,m(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(e){this.startTime||(this.startTime=e),this.timestamp=e;const t=e-this.startTime;this.remaining=this.localDuration-t,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(t,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(t,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(t/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(t/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),t<this.localDuration?this.rAF=f(this.count):this.$emit("callback")},isNumber(e){return!isNaN(parseFloat(e))},formatNumber(e){e=e.toFixed(this.decimals),e+="";const t=e.split(".");let s=t[0];const i=t.length>1?this.decimal+t[1]:"",o=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;o.test(s);)s=s.replace(o,"$1"+this.separator+"$2");return this.prefix+s+i+this.suffix}},destroyed(){m(this.rAF)}};function at(e,t,s,i,o,r){return u(),p("span",null,w(o.displayValue),1)}const A=S(st,[["render",at]]);function it(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),s.push.apply(s,i)}return s}A.unmounted=A.destroyed,Reflect.deleteProperty(A,"destroyed");var nt=function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?E(Object(s),!0).forEach(function(i){it(e,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(s,i))})}return e}({name:"CountTo",emits:["callback","mountedCallback"]},A);const ot={class:"el-card box-border p-12px h-full w-full relative"},rt={key:0,class:"right-icon"},lt=V({name:"Statistics"}),ct=V({...lt,props:{title:{},value:{},icon:{}},setup(e){return(t,s)=>(u(),p("div",ot,[n("div",null,w(t.title),1),_(g(nt),{class:"num","start-val":0,"end-val":t.value,duration:3e3},null,8,["end-val"]),t.icon?(u(),p("div",rt,[(u(),Y(I(t.icon),{size:"35"}))])):z("",!0)]))}});const k=S(ct,[["__scopeId","data-v-7708f165"]]);function ut(e){return P({url:"/statistics/countnum",method:"get",params:e})}function dt(e,t){return P({url:`/statistics/registeruser/${e}/${t}`,method:"get"})}function pt(e,t){return P({url:`/statistics/createdgroup/${e}/${t}`,method:"get"})}const K=e=>(G("data-v-c522d06c"),e=e(),J(),e),ht={class:"el-card flex flex-col box-border h-full w-full relative"},_t={class:"h-50px pl-12px pr-12px box-border flex items-center justify-between bd-title"},ft=K(()=>n("div",{class:"bd-title-left"},[n("p",{class:"m-0 font-600"},"注册用户统计")],-1)),mt={class:"bd-tittle-right"},vt={class:"flex-1 flex overflow-hidden p-12px"},yt={class:"flex-1"},gt={class:"w-400px h-full"},xt=K(()=>n("div",{class:"mb-12px font-600"},"注册量排名",-1)),wt={class:"panking"},bt={key:0,class:"panking-item"},Vt={class:"index"},Dt={class:"date flex-1"},$t={class:"num"},St=V({name:"AddUser"}),kt=V({...St,props:{title:{},value:{},icon:{}},setup(e){let t=null;const s=b(),i=b([]),o=b([]),r=M({xAxis:{type:"category",data:[]},tooltip:{trigger:"axis"},yAxis:{type:"value"},series:{data:[],type:"line"}}),h=()=>{dt(o.value[0],o.value[1]).then(c=>{const a=[],y=[],d=[];for(const l in c)a.push({time:l,value:c[l]}),y.push(l),d.push(c[l]);a.sort((l,F)=>F.value-l.value),i.value=a,r.xAxis.data=y,r.series.data=d,t&&t.setOption(r),t&&t.resize(),window.addEventListener("resize",v)})},x=c=>{h()},v=()=>{t&&t.resize()};return T(()=>{const c=D(new Date().getTime()-2592e6).format("YYYY-MM-DD"),a=D().format("YYYY-MM-DD");o.value=[c,a],t=H(s.value),h()}),B(()=>{window.removeEventListener("resize",v)}),U(()=>{window.removeEventListener("resize",v)}),(c,a)=>{const y=C("el-date-picker");return u(),p("div",ht,[n("div",_t,[ft,n("div",mt,[_(y,{modelValue:g(o),"onUpdate:modelValue":a[0]||(a[0]=d=>N(o)?o.value=d:null),type:"daterange",class:"!w-220px","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"value-format":"YYYY-MM-DD",onChange:x},null,8,["modelValue"])])]),n("div",vt,[n("div",yt,[n("div",{ref_key:"echartsRef",ref:s,class:"w-full h-full"},null,512)]),n("div",gt,[xt,n("div",wt,[(u(!0),p($,null,q(g(i),(d,l)=>(u(),p($,{key:l},[l<10?(u(),p("div",bt,[n("div",Vt,w(l+1),1),n("div",Dt,w(d.time),1),n("div",$t,w(d.value),1)])):z("",!0)],64))),128))])])])])}}});const Yt=S(kt,[["__scopeId","data-v-c522d06c"]]),Q=e=>(G("data-v-a730aaf6"),e=e(),J(),e),At={class:"el-card flex flex-col box-border h-full w-full relative"},Ct={class:"h-50px pl-12px pr-12px box-border flex items-center justify-between bd-title"},Ft=Q(()=>n("div",{class:"bd-title-left"},[n("p",{class:"m-0 font-600"},"新建群数量统计")],-1)),Ot={class:"bd-tittle-right"},zt={class:"flex-1 flex overflow-hidden p-12px"},Mt={class:"flex-1"},Tt={class:"w-400px"},Nt=Q(()=>n("div",{class:"mb-12px font-600"},"新建群排名",-1)),qt={class:"panking"},Pt={key:0,class:"panking-item"},Rt={class:"index"},Lt={class:"date flex-1"},jt={class:"num"},Et=V({name:"AddGroup"}),It=V({...Et,props:{title:{},value:{},icon:{}},setup(e){let t=null;const s=b(),i=b([]),o=b([]),r=M({tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:[],axisLabel:{color:"#a1a1a1"}},yAxis:[{type:"value",axisLabel:{color:"#a1a1a1"}}],series:{name:"群数",type:"bar",emphasis:{focus:"series"},data:[]}}),h=()=>{pt(o.value[0],o.value[1]).then(c=>{const a=[],y=[],d=[];for(const l in c)a.push({time:l,value:c[l]}),y.push(l),d.push(c[l]);a.sort((l,F)=>F.value-l.value),i.value=a,r.xAxis.data=y,r.series.data=d,t&&t.setOption(r),t&&t.resize(),window.addEventListener("resize",v)})},x=c=>{h()},v=()=>{t&&t.resize()};return T(()=>{const c=D(new Date().getTime()-2592e6).format("YYYY-MM-DD"),a=D().format("YYYY-MM-DD");o.value=[c,a],t=H(s.value),h()}),B(()=>{window.removeEventListener("resize",v)}),U(()=>{window.removeEventListener("resize",v)}),(c,a)=>{const y=C("el-date-picker");return u(),p("div",At,[n("div",Ct,[Ft,n("div",Ot,[_(y,{modelValue:g(o),"onUpdate:modelValue":a[0]||(a[0]=d=>N(o)?o.value=d:null),type:"daterange",class:"!w-220px","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1,"value-format":"YYYY-MM-DD",onChange:x},null,8,["modelValue"])])]),n("div",zt,[n("div",Mt,[n("div",{ref_key:"echartsRef",ref:s,class:"w-full h-full"},null,512)]),n("div",Tt,[Nt,n("div",qt,[(u(!0),p($,null,q(g(i),(d,l)=>(u(),p($,{key:l},[l<10?(u(),p("div",Pt,[n("div",Rt,w(l+1),1),n("div",Lt,w(d.time),1),n("div",jt,w(d.value),1)])):z("",!0)],64))),128))])])])])}}});const Bt=S(It,[["__scopeId","data-v-a730aaf6"]]),W=V({__name:"index",setup(e){const t=b([{x:0,y:0,w:3,h:4,i:"register_count",props:{title:"当日注册人数",value:0,icon:"i-bd-people"},component:r=>_(k,r,null)},{x:3,y:0,w:3,h:4,i:"group_create_count",props:{title:"当日新建群",value:0,icon:"i-bd-peoples-two"},component:r=>_(k,r,null)},{x:6,y:0,w:3,h:4,i:"user_total_count",props:{title:"当前总用户",value:0,icon:"i-bd-ranking"},component:r=>_(k,r,null)},{x:9,y:0,w:3,h:4,i:"group_total_count",props:{title:"当前总群数",value:0,icon:"i-bd-data-sheet"},component:r=>_(k,r,null)},{x:0,y:1,w:12,h:12,i:"4",component:r=>_(Yt,r,null)},{x:4,y:1,w:12,h:12,i:"5",component:r=>_(Bt,r,null)}]),s=b(!1),i=M({date:""}),o=()=>{ut(i).then(r=>{for(const h in r)t.value.map(x=>{x.i===h&&(x.props.value=r[h])})})};return T(()=>{i.date=D().format("YYYY-MM-DD"),o()}),(r,h)=>{const x=C("grid-item"),v=C("grid-layout"),c=X;return u(),Y(c,{class:"!p-0"},{default:O(()=>[_(v,{layout:g(t),"onUpdate:layout":h[0]||(h[0]=a=>N(t)?t.value=a:null),"is-draggable":g(s),"is-resizable":g(s),"col-num":12,"row-height":30,"vertical-compact":!0,"use-css-transforms":!0,margin:[12,12]},{default:O(()=>[(u(!0),p($,null,q(g(t),a=>(u(),Y(x,{key:a.i,x:a.x,y:a.y,w:a.w,h:a.h,i:a.i},{default:O(()=>[(u(),Y(I(a.component),Z(tt(a.props)),null,16))]),_:2},1032,["x","y","w","h","i"]))),128))]),_:1},8,["layout","is-draggable","is-resizable"])]),_:1})}}});typeof R=="function"&&R(W);const Wt=S(W,[["__scopeId","data-v-58dc9e7e"]]);export{Wt as default};
