import{_ as O}from"./index-ed788ec2.js";import{e as S,a6 as T,ac as H,r as C,l as o,aC as J,av as z,ak as d,aw as K,M as y,o as Q,h as s,ay as W,i as u,j as m,w as l,a7 as p,a8 as x,u as a,af as X,a3 as Y,ad as Z,a5 as ee,aa as te,ab as oe,az as ae,a4 as re,at as V,ah as ne}from"./vue-cc42d2bc.js";import{B as le,_ as se}from"./index-3da832da.js";import{f as pe}from"./user-053075e3.js";import{b as B}from"./route-block-83d24a4e.js";import"./axios-4fe91515.js";const de=_=>(te("data-v-cb729b78"),_=_(),oe(),_),ie={class:"flex-1 el-card border-none flex-col box-border overflow-hidden"},ue={class:"h-50px pl-12px pr-12px box-border flex items-center justify-between bd-title"},_e={class:"bd-title-left"},ce={class:"m-0 font-600"},me={class:"flex items-center h-50px"},fe={class:"flex-1 overflow-hidden p-12px"},be={class:"bd-card-footer pl-12px pr-12px mb-12px flex items-center justify-between"},ge=de(()=>p("div",null,null,-1)),ye=S({name:"UserFriends"}),U=S({...ye,setup(_){const f=T(),D=H(),q=C([{prop:"name",label:"好友昵称",width:140},{prop:"avatar",label:"好友头像",align:"center",width:90,render:e=>{let n="";return e.row.uid&&(n=`${le.APP_URL}users/${e.row.uid}/avatar`),o(J,{src:n,size:54},{default:()=>[e.row.name]})}},{prop:"uid",label:"好友ID"},{prop:"relationship_time",label:"成为好友时间"},{prop:"remark",label:"备注"},{prop:"operation",label:"操作",align:"center",fixed:"right",width:124,render:e=>o(K,null,{default:()=>[o(z,{type:"primary",onClick:()=>N(e.row)},{default:()=>[d("聊天记录")]})]})}]),h=y([]),b=y(!1),v=y(0),r=C({keyword:"",sort_type:0,uid:f.query.uid,page_size:15,page_index:1}),c=()=>{b.value=!0,pe(r).then(e=>{b.value=!1,h.value=e,v.value=e.length})},F=e=>{r.page_size=e,c()},I=e=>{r.page_index=e,c()},N=e=>{D.push({path:"/message/recordpersonal",query:{name:f.query.name,uid:f.query.uid,touid:e.uid,toname:e.name}})};return Q(()=>{c()}),(e,n)=>{const $=s("el-text"),j=s("el-input"),g=s("el-form-item"),w=s("el-option"),E=s("el-select"),P=s("el-form"),R=s("i-bd-setting"),k=s("el-table-column"),A=s("el-table"),L=s("el-pagination"),G=O,M=W("loading");return u(),m(G,{class:"flex-col"},{default:l(()=>[p("div",ie,[p("div",ue,[p("div",_e,[p("p",ce,[o($,{type:"primary"},{default:l(()=>[d(x(e.$route.query.name),1)]),_:1}),d(" 的好友 ")])]),p("div",me,[o(P,{inline:""},{default:l(()=>[o(g,{class:"mb-0 !mr-16px"},{default:l(()=>[o(j,{modelValue:a(r).keyword,"onUpdate:modelValue":n[0]||(n[0]=t=>a(r).keyword=t),placeholder:"uid/手机号/用户名",clearable:""},null,8,["modelValue"])]),_:1}),o(g,{class:"mb-0 !mr-16px"},{default:l(()=>[o(E,{modelValue:a(r).sort_type,"onUpdate:modelValue":n[1]||(n[1]=t=>a(r).sort_type=t),placeholder:"请选择"},{default:l(()=>[o(w,{label:"添加时间排序",value:0}),o(w,{label:"按消息顺序",value:1})]),_:1},8,["modelValue"])]),_:1}),o(g,{class:"mb-0 !mr-0"},{default:l(()=>[o(a(z),{type:"primary",onClick:c},{default:l(()=>[d("查询")]),_:1})]),_:1})]),_:1})])]),p("div",fe,[X((u(),m(A,{data:a(h),border:!0,style:{width:"100%",height:"100%"}},{default:l(()=>[o(k,{type:"index",width:42,align:"center",fixed:"left"},{header:l(()=>[o(R,{class:"cursor-pointer",size:"16"})]),_:1}),(u(!0),Y(ee,null,Z(a(q),t=>(u(),m(k,ae(t,{key:t.prop}),{default:l(i=>[t.render?(u(),m(re(t.render),{key:0,row:i.row},null,8,["row"])):t.formatter?V(e.$slots,t.prop,{key:1,row:i.row},()=>[d(x(t.formatter(i.row)),1)],!0):t.prop?V(e.$slots,t.prop,{key:2,row:i.row},()=>[d(x(i.row[t.prop]),1)],!0):ne("",!0)]),_:2},1040))),128))]),_:3},8,["data"])),[[M,a(b)]])]),p("div",be,[ge,o(L,{"current-page":a(r).page_index,"onUpdate:currentPage":n[2]||(n[2]=t=>a(r).page_index=t),"page-size":a(r).page_size,"onUpdate:pageSize":n[3]||(n[3]=t=>a(r).page_size=t),"page-sizes":[15,20,30,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:a(v),onSizeChange:F,onCurrentChange:I},null,8,["current-page","page-size","total"])])])]),_:3})}}});typeof B=="function"&&B(U);const ze=se(U,[["__scopeId","data-v-cb729b78"]]);export{ze as default};
